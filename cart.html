<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shopping Cart</title>
  <link rel="stylesheet" href="stylee.css">
</head>
<body>

  <div class="cart-container">
    <h2 class="cart-title">Your Shopping Cart</h2>
    <div id="cart-container"></div>
  </div>

  <script>
    function loadCart() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      let container = document.getElementById("cart-container");

      if (cart.length === 0) {
        container.innerHTML = `
          <p class="empty-message">Your cart is currently empty.</p>
          <p class="catalogue-link">Browse our <a href="catalogue.html" target="rightFrame">Catalogue</a> to add books.</p>
        `;
        return;
      }

      let tableHTML = `
        <table class="cart-table">
          <thead>
            <tr>
              <th>Book Name</th>
              <th>Price (₹)</th>
              <th>Quantity</th>
              <th>Total (₹)</th>
              <th>Remove</th>
            </tr>
          </thead>
          <tbody>
      `;

      let grandTotal = 0;

      cart.forEach((item, index) => {
        let total = item.price * item.quantity;
        grandTotal += total;
        tableHTML += `
          <tr>
            <td>${item.name}</td>
            <td>${item.price}</td>
            <td>
              <input type="number" min="1" value="${item.quantity}" onchange="updateQuantity(${index}, this.value)">
            </td>
            <td>${total.toFixed(2)}</td>
            <td><button class="remove-btn" onclick="removeItem(${index})">X</button></td>
          </tr>
        `;
      });

      tableHTML += `
          </tbody>
          <tfoot>
            <tr>
              <td colspan="3" style="text-align:right; font-weight:bold;">Grand Total:</td>
              <td colspan="2" style="font-weight:bold;">₹${grandTotal.toFixed(2)}</td>
            </tr>
          </tfoot>
        </table>
      `;

      container.innerHTML = tableHTML;
    }

    function updateQuantity(index, qty) {
      let cart = JSON.parse(localStorage.getItem("cart"));
      cart[index].quantity = parseInt(qty);
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
    }

    function removeItem(index) {
      let cart = JSON.parse(localStorage.getItem("cart"));
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
    }

    window.onload = loadCart;
  </script>

</body>
</html>
